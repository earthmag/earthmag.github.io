<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EarthMag</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

  <link rel="icon" type="image/png" href="favicon.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <style>
    * {   cursor: none !important;
margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; color: #212121; background-color: #FAFAFA; cursor: none; /* hide default cursor */ }

    a, button {
      cursor: none !important; /* remove default pointer */
    }
    .footicon:hover {
  transform: scale(1.2);
  color: #1d1d1d;
}


    .custom-cursor {
      width: 18px;
      height: 18px;
      border: 2px solid rgba(46,125,50,0.8);
      border-radius: 50%;
      position: fixed;
      pointer-events: none;
      transform: translate(-50%, -50%);
      transition: transform 0.15s ease-out, background-color 0.2s ease, border-color 0.2s ease, opacity 0.2s ease;
      z-index: 3000;
    }

    .custom-cursor.click {
      transform: translate(-50%, -50%) scale(0.8);
      background-color: rgba(0,150,136,0.2);
    }

    .custom-cursor.hidden {
      opacity: 0;
    }

    .custom-cursor.nav-hover {
      transform: translate(-50%, -50%) scale(1.6);
      background-color: rgba(0,150,136,0.1);
      border-color: rgba(255, 255, 255,0.1);
    }

    nav {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: auto;
      max-width: 90%;
      padding: 14px 28px;
      border-radius: 18px;
      background: rgba(255,255,255, 0.55) !important;
      backdrop-filter: blur(25px) saturate(180%);
      -webkit-backdrop-filter: blur(25px) saturate(180%);
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      transition: all 0.3s ease;
    }
    nav .logo {
      font-family: 'Playfair Display', serif;
      font-weight: 800;
      letter-spacing: -0.5px;
      font-size: 26px;
      color: #2E7D32;
      transition: color 0.3s ease;
      text-decoration: none;
    }
    nav .logo:hover {
        color:white;
    }
    nav ul { display: flex; list-style: none; }
    nav ul li { margin-left: 20px; }
    nav ul li a {
      color: white; text-decoration: none; font-weight: 500; transition: all 0.3s ease;
      padding: 8px 14px; border-radius: 12px;
      font-family: 'Inter', sans-serif;
    }
    nav ul li a:hover {
      color: black;
      background: rgba(255, 255, 255, 0.65);
      box-shadow: 0 6px 20px rgba(0,0,0,0.2), inset 0 0 15px rgba(255,255,255,0.4);
      transform: translateY(-2px);
    }

    header {
      height: 100vh; width: 100%;
      position: relative; overflow: hidden;
      display: flex; align-items: center; justify-content: center;
      text-align: center; padding: 20px;
    }
    header video {
      position: absolute; top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: cover; z-index: -1;
    }
    header .overlay {
      position: relative; z-index: 1;
      max-width: 800px;
    }
    header h1 { font-family: 'Playfair Display', serif; font-size: 72px; margin-bottom: 20px; color: white;; }
    header p { font-family: 'Inter', sans-serif; font-size: 22px; margin-bottom: 30px; color:white; }
    header a {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #2E7D32, #009688);
      color: #fff;
      padding: 12px 30px; border-radius: 30px;
      text-decoration: none; font-weight: bold;
      box-shadow: 0 4px 12px rgba(46, 125, 50, 0.6);
      transition: background 0.3s, box-shadow 0.3s, transform 0.2s ease, box-shadow 0.2s ease;
      display: inline-block;
    }
    header a:hover {
      background: linear-gradient(135deg, #256029, #00796B);
      box-shadow: 0 12px 32px rgba(37,96,41,0.25);
      transform: translateY(-2px);
    }

    section {
      background-color: #fff;
      transition: background-color 0.3s;
    }
    section:nth-of-type(even) {
      background-color: #f9f9f9;
    }
    section h2 {
      font-family: 'Playfair Display', serif;
      font-size: 40px;
      font-weight: 700;
      /* text-transform: ; */
      letter-spacing: 1px;
      margin-bottom: 20px;
      color: #2E7D32;
      border-bottom: 2px solid #2E7D32;
      padding-bottom: 8px;
      max-width: max-content;
      text-align: center !important;
      align-items: center;
      align-self: center;
      align-content: center;
    }
    section p {
      font-family: 'Inter', sans-serif;
      max-width: 800px;
      margin-bottom: 20px;
      line-height: 1.8;
      font-size: 18px;
      color: #444;
    }

    form input[type="text"],
    form input[type="email"],
    form textarea {
      padding: 10px;
      margin: 5px;
      width: 250px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-family: 'Inter', sans-serif;
      font-size: 16px;
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    form textarea {
      width: 520px;
      height: 100px;
      resize: vertical;
    }
    form input[type="text"]:focus,
    form input[type="email"]:focus,
    form textarea:focus {
      border-color: #2E7D32;
      box-shadow: 0 0 8px rgba(46, 125, 50, 0.6);
      outline: none;
    }
    form button {
      font-family: 'Inter', sans-serif;
      padding: 10px 20px;
      background: linear-gradient(135deg, #2E7D32, #009688);
      color: #fff;
      font-weight: bold;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: background 0.3s;
    }
    form button:hover {
      background: linear-gradient(135deg, #256029, #00792c);
    }

    .footer {
      background: #111;
      text-align: center;
      padding: 30px;
      color: #ccc;
      font-size: 14px;
    }
    .footer a {
      color: #ccc;
      text-decoration: none;
      transition: color 0.3s;
    }
    .footer a:hover {
      color: #256a00;
    }

    @media (max-width: 900px) {
      nav { flex-wrap: wrap; }
      nav ul {
        flex-direction: column;
        background: rgba(255,255,255,0.25);
        backdrop-filter: saturate(180%) blur(20px);
        -webkit-backdrop-filter: saturate(180%) blur(20px);
        width: 100%;
        padding: 20px;
        border-radius: 12px;
      }
      nav ul li { margin: 10px 0; }
    }

    .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6); }
    .modal-content { background: #fff; margin: 10% auto; padding: 30px; border-radius: 12px; max-width: 600px; box-shadow: 0 8px 32px rgba(0,0,0,0.2); }
    .modal-content h2 { font-family: 'Playfair Display', serif; color: #2E7D32; margin-bottom: 20px; }
    .modal-content input, .modal-content textarea { width: 100%; margin-bottom: 12px; padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-family: 'Inter', sans-serif; }
    .modal-content button { background: linear-gradient(135deg, #2E7D32, #009688); color: #fff; border: none; border-radius: 30px; padding: 10px 20px; cursor: pointer; }
    .modal-content button:hover { background: linear-gradient(135deg, #256029, #00796B); }
    .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
    .close:hover { color: #000; }
nav {
  background: url('https://media.istockphoto.com/id/1618820764/photo/blurred-abstract-gray-gradient-glassmorphism-color-transition-frosted-glass-effect-background.jpg?s=612x612&w=0&k=20&c=pDiG2EWkFq_7-qkSLLAHGAycoeH0D-8GwBrJTELro4s');
  backdrop-filter: saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
  transition: background 0.4s ease, box-shadow 0.4s ease;
}

nav ul li a {
  color: #212121;
}
nav ul li a:hover {
    background: rgba(94, 94, 94, 0.15);
    /* color:white; */
    box-shadow: 0 6px 20px rgba(0,0,0,0.2), inset 0 0 15px rgba(255,255,255,0.4);
    transform: translateY(-2px);
    transition:0.5s
}
nav .logo:hover {
color:grey;
transition: 0.5s;
}

    /* Repository Section Styles */
    .repo-toolbar { display:flex; flex-wrap:wrap; align-items:center; gap:16px; margin-bottom:35px; }
    .repo-toolbar input { padding:12px 16px; border-radius:14px; border:1px solid rgba(0,0,0,0.1); font-size:16px; box-shadow:0 2px 8px rgba(0,0,0,0.05); transition:all 0.3s ease; }
    .repo-toolbar select { 
      padding:12px 16px; 
      border-radius:14px; 
      border:1px solid rgba(0,0,0,0.15); 
      font-size:16px; 
      background:rgba(255,255,255,0.7); 
      backdrop-filter:blur(12px) saturate(160%); 
      -webkit-backdrop-filter:blur(12px) saturate(160%); 
      box-shadow:0 2px 8px rgba(0,0,0,0.08); 
      transition:all 0.3s ease; 
      appearance:none; 
      background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%232E7D32' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E"); 
      background-repeat:no-repeat; 
      background-position:right 12px center; 
      background-size:16px; 
      padding-right:40px;
    }
    .repo-toolbar input:focus, .repo-toolbar select:focus { border-color:#2E7D32; box-shadow:0 4px 14px rgba(46,125,50,0.25); outline:none; }
    .repo-toolbar button { background:#2E7D32; color:#fff; border:none; border-radius:50px; padding:12px 22px; font-weight:600; cursor:pointer; transition:transform 0.2s, box-shadow 0.2s; }
    .repo-toolbar button:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(0,0,0,0.25); }

    .paper-card { background:rgba(255,255,255,0.7); backdrop-filter:blur(20px) saturate(160%); -webkit-backdrop-filter:blur(20px) saturate(160%); border-radius:20px; box-shadow:0 8px 30px rgba(0,0,0,0.12); padding:26px; flex:1 1 320px; display:flex; flex-direction:column; justify-content:space-between; transition:transform 0.25s, box-shadow 0.25s; }
    .paper-card:hover { transform:translateY(-6px); box-shadow:0 12px 38px rgba(0,0,0,0.2); }

    .paper-card h3 { font-family:'Playfair Display',serif; font-size:22px; font-weight:700; margin-bottom:8px; color:#2E7D32; }
    .paper-card .authors { font-size:14px; color:#444; margin-bottom:10px; }
    .paper-card .abstract { font-size:15px; color:#333; margin-bottom:14px; line-height:1.55; }
    .paper-card .meta { font-size:13px; color:#666; margin-bottom:10px; }
    .paper-card .tag { display:inline-block; background:linear-gradient(135deg,#E8F5E9,#E0F2F1); color:#2E7D32; padding:3px 9px; border-radius:10px; font-size:12px; margin-right:6px; margin-top:4px; }

    .paper-card .actions { margin-top:15px; display:flex; gap:12px; }
    .paper-card .actions button, .paper-card .actions a { flex:1; text-align:center; padding:10px 16px; border-radius:30px; font-family:'Inter',sans-serif; font-weight:500; font-size:14px; cursor:pointer; text-decoration:none; transition:all 0.3s ease; }
    .paper-card .actions button { background:#2E7D32; color:#fff; border:none; }
    .paper-card .actions button:hover { background:linear-gradient(135deg,#256029,#00796B); transform:translateY(-2px); }
    .paper-card .actions a { background:#fff; color:#2E7D32; border:1px solid #2E7D32; }
    .paper-card .actions a:hover { background:#2E7D32; color:#fff; transform:translateY(-2px); }


    .activePage {
        color: black;
    background: rgba(255,255,255, 0.55);
    box-shadow: 0 6px 20px rgba(0,0,0,0.2), inset 0 0 15px rgba(255,255,255,0.4);
    transform: translateY(-2px);
    transition:0.5s    }
    /* Slide animations */
/* Slide in from right or left on page load */
.slide-in-right { transform: translateX(100%); opacity: 0; }
.slide-in-left  { transform: translateX(-100%); opacity: 0; }

.slide-in-right.active,
.slide-in-left.active { transform: translateX(0); opacity: 1; transition: transform 0.6s ease, opacity 0.6s ease; }

.slide-out-left  { transform: translateX(-100%); opacity: 0; transition: transform 0.5s ease, opacity 0.5s ease; }
.slide-out-right { transform: translateX(100%); opacity: 0; transition: transform 0.5s ease, opacity 0.5s ease; }  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>
<body>
    <nav>
    <a href="index.html" class="logo" id="logo">EarthMag</a>
    <ul>
      <li><a href="facts.html">Facts</a></li>
      <li><a href="data.html" class="activePage">Data</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="intern.html">Internships</a></li>
      <li><a href="mailto:inquire.earthmagazine@gmail.com?subject=Inquiry%20from%20EarthMag%20Website&body=Hello%20EarthMag%20Team%2C%0A%0AI%20would%20like%20to%20learn%20more%20about%20your%20initiatives.%0A%0AThank%20you%2C%0A[Your%20Name]">Contact</a></li>
      <li><a href="blog.html">Blog</a></li>
      <li><a href="journal.html">Journal</a></li>
    </ul>
  </nav>

<div  id="pageWrapper">
<section id="data-dashboard" style="background: #fafafa; text-align: center !important; align-self: center;">
    <div style="width:100% !important; padding: 0;">
    <img src="https://www.primeit.pt/public/uploads/2023/08/a-primeira-página-na-world-wide-web-capa.jpg" alt="Earth from space" style="width:100vw; height:60vh; object-fit:cover; display:block;">
    </div>

    <h2 style="font-family:'Playfair Display',serif;font-size:44px;padding:5%;font-weight:800;letter-spacing:-0.5px; color:#2E7D32;text-align:center;border:none;">Earth Energy & Environmental Data Hub</h2>
    <p style="text-align:center;max-width:900px;margin:0 auto 30px;font-size:18px;line-height:1.8;color:#444;">
      A living dashboard curating up-to-date climate and energy insights. Explore global trends, check your local air quality in real time, and compare countries. Every chart is sourced and downloadable.
    </p>

    <!-- Controls Row -->
    <div style="display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:center;margin:0 auto 24px;">
      <input id="country-search" type="text" placeholder="Search country…" style="padding:12px 14px;border-radius:12px;border:1px solid #d0d0d0;min-width:220px;font-size:15px;">
      <select id="country-select" style="padding:12px 14px;border-radius:12px;border:1px solid #d0d0d0;font-size:15px;min-width:220px;">
        <option value="World">World (default)</option>
      </select>
      <button id="download-current" style="background:#2E7D32;color:#fff;border:none;border-radius:28px;padding:12px 18px;font-weight:600;cursor:pointer;">Download Current Chart</button>
      <button id="copy-link" style="background:#fff;color:#2E7D32;border:1px solid #2E7D32;border-radius:28px;padding:12px 18px;font-weight:600;cursor:pointer;">Share View</button>
    </div>

    <!-- KPI Cards -->
    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-bottom:28px;">
      <div style="background:#ffffff;border-radius:16px;padding:18px 18px 14px;box-shadow:0 10px 30px rgba(0,0,0,0.08);">
        <div style="font-size:13px;color:#666;margin-bottom:6px;">Current PM2.5 (your area)</div>
        <div id="kpi-pm25" style="font-size:32px;font-weight:800;color:#2E7D32;">—</div>
        <div id="kpi-location" style="font-size:12px;color:#777;margin-top:4px;">Detecting location…</div>
      </div>
      <div style="background:#ffffff;border-radius:16px;padding:18px 18px 14px;box-shadow:0 10px 30px rgba(0,0,0,0.08);">
        <div style="font-size:13px;color:#666;margin-bottom:6px;">Latest Global CO₂ Emissions (Mt)</div>
        <div id="kpi-global-co2" style="font-size:32px;font-weight:800;color:#2E7D32;">—</div>
        <div style="font-size:12px;color:#777;margin-top:4px;">From OWID (territorial)</div>
      </div>
      <div style="background:#ffffff;border-radius:16px;padding:18px 18px 14px;box-shadow:0 10px 30px rgba(0,0,0,0.08);">
        <div style="font-size:13px;color:#666;margin-bottom:6px;">Renewables Share of Electricity</div>
        <div id="kpi-renew-share" style="font-size:32px;font-weight:800;color:#2E7D32;">—</div>
        <div style="font-size:12px;color:#777;margin-top:4px;">World (latest year)</div>
      </div>
    </div>

    <!-- Charts Grid -->
    <div style="display:grid;grid-template-columns:1fr;gap:24px;">
      <div style="background:#fff;border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,0.08);">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;">
          <h3 style="font-family:'Playfair Display',serif;color:#2E7D32;font-size:22px;margin:0;">CO₂ Emissions Trend</h3>
          <div style="font-size:12px;color:#666;">Source: Our World in Data</div>
        </div>
        <canvas id="chart-co2" height="110"></canvas>
      </div>

      <div style="background:#fff;border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,0.08);">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;">
          <h3 style="font-family:'Playfair Display',serif;color:#2E7D32;font-size:22px;margin:0;">Renewables in Electricity Mix</h3>
          <div style="font-size:12px;color:#666;">Source: Our World in Data</div>
        </div>
        <canvas id="chart-renew" height="110px"></canvas>
      </div>
      <div style="display: flex; gap: 24px; justify-content: center; flex-wrap: wrap;">
      <div style="background:#fff;border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,0.08); width: 40%;">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;">
          <h3 style="font-family:'Playfair Display',serif;color:#2E7D32;font-size:22px;margin:0;">Real‑Time Air Quality (PM2.5)</h3>
          <div style="font-size:12px;color:#666;">Source: Open‑Meteo Air Quality API</div>
        </div>
        <canvas id="chart-aq" height="110px !important"></canvas>
      </div>
      <div style="background:#fff;border-radius:16px;padding:18px;box-shadow:0 10px 30px rgba(0,0,0,0.08); width: 40%;">
        <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:10px;">
          <h3 style="font-family:'Playfair Display',serif;color:#2E7D32;font-size:22px;margin:0;">Real‑Time Air Quality (PM2.5)</h3>
          <div style="font-size:12px;color:#666;">Source: Open‑Meteo Air Quality API</div>
        </div>
        <canvas id="chart-aq" height="110px !important"></canvas>
      </div>

    </div>

    <!-- Participation / Actions -->
    <div style="margin-top:30px;display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:center;">
      <button id="pledge-btn" style="background:#009688;color:#fff;border:none;border-radius:28px;padding:12px 18px;font-weight:600;cursor:pointer;">Make a Personal Climate Pledge</button>
      <button id="export-pledge" style="background:#fff;color:#009688;border:1px solid #009688;border-radius:28px;padding:12px 18px;font-weight:600;cursor:pointer;">Export My Pledges</button>
    </div>

    <!-- Sources -->
    <div style="margin-top:28px;font-size:14px;color:#555;">
      <strong>Sources:</strong>
      <ul style="margin-left:18px;line-height:1.8;">
        <li>Our World in Data — CO₂ emissions: <a href="https://ourworldindata.org/co2-and-greenhouse-gas-emissions" target="_blank" rel="noopener">Methodology & data</a></li>
        <li>Our World in Data — Electricity mix & renewables: <a href="https://ourworldindata.org/electricity-mix" target="_blank" rel="noopener">Methodology & data</a></li>
        <li>Open‑Meteo Air Quality API: <a href="https://open-meteo.com/en/docs/air-quality-api" target="_blank" rel="noopener">API docs</a></li>
      </ul>
    </div>
  </div>
</section>

<!-- Modal for PDF preview -->
<div id="pdfModal" class="modal">
  <div class="modal-content" style="max-width: 820px; min-width:320px;">
    <span class="close" id="pdfModalClose" style="float:right;font-size:28px;cursor:pointer;">&times;</span>
    <div id="pdfModalTitle" style="font-family:'Playfair Display',serif;font-size:22px;margin-bottom:12px;"></div>
    <iframe id="pdfFrame" src="" width="100%" height="500px" style="border:none; border-radius:10px; box-shadow:0 2px 12px rgba(0,0,0,0.13);"></iframe>
  </div>
</div>


   <!-- Footer -->
<div id="contact" style="background-color: #f2f2f2; padding: 40px 20px; font-family: 'Arial', sans-serif; color: #333;">
  <div style="max-width: 1000px; margin: auto; display: flex; flex-wrap: wrap; justify-content: space-between; gap: 20px;">

    <!-- Contact Info -->
    <div style="flex: 1; min-width: 220px;">
      <h3 style="color: #2E7D32; font-family: 'Playfair Display', serif; font-size: 24px; margin-bottom: 15px;">Contact Us</h3>
      <p style="margin: 5px 0; font-size: 16px;">Email: <a href="mailto:inquire.earthmagazine@gmail.com" style="color: #2E7D32; text-decoration: none;">inquire.earthmagazine@gmail.com</a></p>
      <p style="margin: 5px 0; font-size: 16px;">Phone: <a href="tel:+911234567890" style="color: #2E7D32; text-decoration: none;">+91 123 456 7890</a></p>
      <p style="margin: 5px 0; font-size: 16px;">Address: 123 Sustainability Lane, Kolkata, India</p>
    </div>

    <!-- Stay Connected -->
    <div style="flex: 1; min-width: 220px;">
      <h3 style="color: #2E7D32; font-family: 'Playfair Display', serif; font-size: 24px; margin-bottom: 15px;">Stay Connected</h3>
      <p style="margin: 5px 0; font-size: 16px;">Follow us for updates on sustainability:</p>
      <div style="display: flex; gap: 15px; margin-top: 10px;">
        <a href="https://facebook.com/earthmag" target="_blank" style="font-size: 24px; color: #2E7D32; text-decoration: none;">
          <i class="fab fa-facebook footicon"></i>
        </a>
        <a href="https://twitter.com/earthmag" target="_blank" style="font-size: 24px; color: #2E7D32; text-decoration: none;">
          <i class="fab fa-twitter footicon"></i>
        </a>
        <a href="https://instagram.com/earthmagg" target="_blank" style="font-size: 24px; color: #2E7D32; text-decoration: none;">
          <i class="fab fa-instagram footicon"></i>
        </a>
        <a href="https://www.linkedin.com/company/earthmag" target="_blank" style="font-size: 24px; color: #2E7D32; text-decoration: none;">
          <i class="fab fa-linkedin footicon"></i>
        </a>      </div>
    </div>

  </div>

  <!-- Footer Bottom -->
  <div style="text-align: center; margin-top: 30px; font-size: 14px; color: #666;">
    <p>© 2025 EarthMag. All Rights Reserved.</p>
  </div>
</div>  <div id="applyModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Apply to Write</h2>
      <form>
        <input type="text" placeholder="Your Name" required />
        <input type="email" placeholder="Your Email" required />
        <textarea placeholder="Why do you want to write for us?" required></textarea>
        <button type="submit">Submit</button>
      </form>
    </div>
  </div>
</div>
  <div class="custom-cursor" id="customCursor"></div>

<script>
// --- Repository Script ---
// Event listeners
document.addEventListener('DOMContentLoaded', () => {
  // Modal for Apply to Write
  const modal = document.getElementById('applyModal');
  const btn = document.getElementById('openFormBtn');
  const span = document.querySelector('.close');
  if (btn && modal && span) {
    btn.onclick = () => modal.style.display = 'block';
    span.onclick = () => modal.style.display = 'none';
    window.onclick = (event) => { if(event.target == modal) modal.style.display = 'none'; }
  }
  // Navbar scroll effect
// Define a numeric order for pages
// Define page order for directional transitions
const pageOrder = {
  "index.html": 1,
  "":1,
  "facts.html": 2,
  "data.html": 3,
  "about.html": 4,
  "intern.html": 5,
  "blog.html": 6,
  "journal.html": 7
};

// Determine current and previous page index
const currentPage = window.location.pathname.split("/").pop();
const prevIndex = sessionStorage.getItem('prevPageIndex') || 0;
const currentIndex = pageOrder[currentPage] || 0;

// Apply slide-in direction
if (currentIndex >= prevIndex) pageWrapper.classList.add('slide-in-right');
else pageWrapper.classList.add('slide-in-left');

setTimeout(() => pageWrapper.classList.add('active'), 50);
sessionStorage.setItem('prevPageIndex', currentIndex);

// Animate link clicks
document.querySelectorAll('nav ul li a').forEach(link => {
  link.addEventListener('click', e => {
    e.preventDefault();
    const targetPage = link.getAttribute('href');
    const targetIndex = pageOrder[targetPage] || 0;

    if (targetIndex > currentIndex) pageWrapper.classList.add('slide-out-left');
    else pageWrapper.classList.add('slide-out-right');

    setTimeout(() => { window.location.href = targetPage; }, 500);
  });
});  
// Custom cursor
  const customCursor = document.getElementById('customCursor');
  if (customCursor) {
    document.addEventListener('mousemove', e => {
      customCursor.style.left = e.clientX + 'px';
      customCursor.style.top = e.clientY + 'px';
    });
    document.addEventListener('mousedown', () => {
      customCursor.classList.add('click');
    });
    document.addEventListener('mouseup', () => {
      customCursor.classList.remove('click');
    });
    const interactiveElements = document.querySelectorAll('a, button, nav ul li a');
    interactiveElements.forEach(el => {
      el.addEventListener('mouseenter', () => {
        if (el.closest('nav')) {
          customCursor.classList.add('nav-hover');
        }
      });
      el.addEventListener('mouseleave', () => {
        customCursor.classList.remove('nav-hover');
      });
    });
  }
  // Repository search/sort
  const searchInput = document.getElementById('repo-search');
  const sortSelect = document.getElementById('repo-sort');
  if (searchInput) {
    searchInput.addEventListener('input', e => {
      currentSearch = searchInput.value;
      renderPapers();
    });
  }
  if (sortSelect) {
    sortSelect.addEventListener('change', e => {
      currentSort = sortSelect.value;
      renderPapers();
    });
  }
  renderPapers();
  // PDF Modal
  const pdfModal = document.getElementById('pdfModal');
  const pdfModalClose = document.getElementById('pdfModalClose');
  const pdfFrame = document.getElementById('pdfFrame');
  const pdfModalTitle = document.getElementById('pdfModalTitle');
  document.addEventListener('click', function(e) {
    if (e.target && e.target.classList.contains('preview-pdf-btn')) {
      const pdfUrl = e.target.getAttribute('data-pdf');
      const title = e.target.getAttribute('data-title');
      if (pdfFrame && pdfModal && pdfModalTitle) {
        pdfFrame.src = pdfUrl;
        pdfModalTitle.textContent = title;
        pdfModal.style.display = 'block';
      }
    }
    if (e.target === pdfModalClose) {
      pdfModal.style.display = 'none';
      if (pdfFrame) pdfFrame.src = "";
    }
    if (e.target === pdfModal) {
      pdfModal.style.display = 'none';
      if (pdfFrame) pdfFrame.src = "";
    }
  });
});
</script>
<script>
// --- Google Sheets Repository Loader ---
async function loadPapersFromSheet() {
  try {
    const sheetId = "YOUR_SHEET_ID";
    const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json`;
    const response = await fetch(url);
    const text = await response.text();
    const json = JSON.parse(text.substr(47).slice(0,-2));
    papers.length = 0;
    json.table.rows.forEach(row => {
      papers.push({
        title: row.c[0]?.v || "",
        authors: row.c[1]?.v ? row.c[1].v.split(",") : [],
        abstract: row.c[2]?.v || "",
        year: parseInt(row.c[3]?.v) || 0,
        tags: row.c[4]?.v ? row.c[4].v.split(",") : [],
        pdf: row.c[5]?.v || ""
      });
    });
    renderPapers();
  } catch (err) {
    console.error("Failed to load Google Sheet:", err);
  }
}
loadPapersFromSheet();
document.addEventListener('DOMContentLoaded', () => {
  const page = document.getElementById('pageWrapper');
  
  // Slide in on load
  setTimeout(() => {
    page.classList.add('active');
  }, 50);

  // Animate navigation to journal page (index.html)
  const journalLink = document.querySelector('a[href="journal.html"]');
  if(journalLink) {
    journalLink.addEventListener('click', (e) => {
      e.preventDefault();
      page.classList.add('slide-out');
      setTimeout(() => {
        window.location.href = journalLink.href;
      }, 500); // matches CSS transition
    });
  }

  // Optional: animate back to index from journal page
  const indexLink = document.querySelector('a[href="index.html"]');
  if(indexLink) {
    indexLink.addEventListener('click', (e) => {
      e.preventDefault();
      page.classList.add('slide-out');
      setTimeout(() => {
        window.location.href = indexLink.href;
      }, 500);
    });
  }
});
const hideCursorElements = document.querySelectorAll('input, textarea, button, a, iframe');

hideCursorElements.forEach(el => {
  el.addEventListener('mouseenter', () => {
    cursor.classList.add('hidden');
  });
  el.addEventListener('mouseleave', () => {
    cursor.classList.remove('hidden');
  });
});

</script>
</body>
<script>
(function(){
  // Utility: CSV loader using PapaParse
  function loadCSV(url){
    return new Promise((resolve, reject)=>{
      Papa.parse(url, { download: true, header: true, dynamicTyping: true, complete: (res)=> resolve(res.data), error: reject });
    });
  }

  // Chart instances
  let chartCO2, chartRenew, chartAQ;

  // Elements
  const countrySelect = document.getElementById('country-select');
  const countrySearch = document.getElementById('country-search');
  const kpiCo2 = document.getElementById('kpi-global-co2');
  const kpiRenew = document.getElementById('kpi-renew-share');
  const kpiPM25 = document.getElementById('kpi-pm25');
  const kpiLoc = document.getElementById('kpi-location');

  const CO2_URL = 'https://ourworldindata.org/grapher/co2.csv';
  const RENEW_URL = 'https://ourworldindata.org/grapher/share-electricity-renewables.csv';

  let co2DataByEntity = new Map();
  let renewDataByEntity = new Map();

  function groupByEntity(rows, entityKey='Entity'){
    const map = new Map();
    for(const r of rows){
      const e = r[entityKey] || r['entity'] || r['Entity'] || r['Country'] || r['country'];
      const y = r['Year'] || r['year'];
      if(!e || y == null) continue;
      if(!map.has(e)) map.set(e, []);
      map.get(e).push(r);
    }
    for(const [e, arr] of map){ arr.sort((a,b)=> (a.Year||a.year) - (b.Year||b.year)); }
    return map;
  }

  function setKPI(el, value, suffix=''){
    if(!el) return;
    if(value == null || isNaN(value)) { el.textContent = '—'; return; }
    const num = Number(value);
    const formatted = num >= 1000 ? (num/1000).toFixed(1) + 'k' : num.toLocaleString();
    el.textContent = formatted + (suffix? ' ' + suffix : '');
  }

  function buildLineChart(ctx, labels, series, label){
    if(!ctx) return null;
    const existing = Chart.getChart(ctx);
    if(existing) existing.destroy();
    return new Chart(ctx, {
      type: 'line',
      data: { labels, datasets: [{ label, data: series, tension: 0.25, fill: false }]},
    });
  }

  function updateCO2Chart(entity){
    const rows = co2DataByEntity.get(entity) || [];
    const years = rows.map(r=> r.Year || r.year);
    const values = rows.map(r=> r['Annual CO2 emissions'] || r['co2'] || r['CO2'] || r['value']);
    chartCO2 = buildLineChart(document.getElementById('chart-co2'), years, values, entity + ' CO₂ (Mt)');
    setKPI(kpiCo2, values && values.length ? values[values.length-1] : null);
  }

  function updateRenewChart(entity){
    const rows = renewDataByEntity.get(entity) || [];
    const years = rows.map(r=> r.Year || r.year);
    const values = rows.map(r => r['Renewables (% electricity)'] ?? r['value']);
    chartRenew = buildLineChart(document.getElementById('chart-renew'), years, values, entity + ' Renewables Share (%)');
    setKPI(kpiRenew, values && values.length ? Number(values[values.length-1]).toFixed(1) : null, '%');
  }

  // Load datasets from OWID (CSV via CORS-friendly grapher endpoints)
  async function initDatasets(){
    try{
      const [co2Rows, renewRows] = await Promise.all([
        loadCSV(CO2_URL),
        loadCSV(RENEW_URL)
      ]);

      co2DataByEntity = groupByEntity(co2Rows);
      renewDataByEntity = groupByEntity(renewRows);

      // Populate country selector
      const entities = Array.from(new Set([...co2DataByEntity.keys(), ...renewDataByEntity.keys()])).sort();
      for(const e of entities){
        const opt = document.createElement('option');
        opt.value = e; opt.textContent = e; countrySelect.appendChild(opt);
      }

      const defaultEntity = (new URLSearchParams(location.search)).get('entity') || 'World';
      if([...countrySelect.options].some(o=>o.value===defaultEntity)) countrySelect.value = defaultEntity;

      updateCO2Chart(countrySelect.value);
      updateRenewChart(countrySelect.value);
    } catch(err){
      console.error('Dataset load failed', err);
    }
  }

  // Country search filter
  if(countrySearch){
    countrySearch.addEventListener('input', ()=>{
      const q = countrySearch.value.toLowerCase();
      for(const opt of countrySelect.options){
        opt.hidden = q && !opt.value.toLowerCase().includes(q);
      }
    });
  }

  if(countrySelect){
    countrySelect.addEventListener('change', ()=>{
      updateCO2Chart(countrySelect.value);
      updateRenewChart(countrySelect.value);
      const params = new URLSearchParams(location.search);
      params.set('entity', countrySelect.value);
      history.replaceState(null, '', location.pathname + '?' + params.toString());
    });
  }

  // Download current chart (CO2, Renewables, or AQ)
  document.getElementById('download-current')?.addEventListener('click', ()=>{
    const charts = [
      {id:'chart-co2', name:'co2'},
      {id:'chart-renew', name:'renewables'},
      {id:'chart-aq', name:'airquality'}
    ];
    for (const c of charts) {
      const canvas = document.getElementById(c.id);
      if (canvas) {
        const chart = Chart.getChart(canvas);
        if (chart) {
          const url = canvas.toDataURL('image/png');
          const a = document.createElement('a');
          a.href = url; 
          a.download = `earthmag-${(countrySelect?.value||'chart')}-${c.name}.png`;
          a.click();
          break;
        }
      }
    }
  });

  // Share current view
  document.getElementById('copy-link')?.addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(location.href);
      alert('Sharable link copied to clipboard!');
    }catch(e){ alert('Copy failed. You can copy the URL bar manually.'); }
  });

  // Real-time Air Quality (Open-Meteo). Falls back to Kolkata if permission denied.
  const FALLBACK = { lat: 22.5726, lon: 88.3639, name: 'Kolkata' };
  function updateAQChart(pm25, pm10, aqi, label) {
    const ctx = document.getElementById('chart-aq');
    const existing = Chart.getChart(ctx);
    if (existing) existing.destroy();
    chartAQ = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [label],
        datasets: [
          {
            label: 'PM2.5 (µg/m³)',
            data: [pm25],
            backgroundColor: 'rgba(46,125,50,0.6)',
            borderColor: '#2E7D32',
            borderWidth: 1
          },
          {
            label: 'PM10 (µg/m³)',
            data: [pm10],
            backgroundColor: 'rgba(33,150,243,0.6)',
            borderColor: '#2196F3',
            borderWidth: 1
          },
          {
            label: 'US AQI',
            data: [aqi],
            backgroundColor: 'rgba(255,152,0,0.6)',
            borderColor: '#FF9800',
            borderWidth: 1
          }
        ]
      },
    });
  }

  function fetchAQ(lat, lon, nameLabel){
    const url = `https://air-quality-api.open-meteo.com/v1/air-quality?latitude=${lat}&longitude=${lon}&current=pm2_5,pm10,us_aqi`; 
    fetch(url).then(r=>r.json()).then(d=>{
      const cur = d.current || {}; 
      const pm = cur.pm2_5; 
      const pm10 = cur.pm10;
      const aqi = cur.us_aqi;
      setKPI(kpiPM25, pm, 'µg/m³');
      if(kpiLoc) kpiLoc.textContent = nameLabel || `${lat.toFixed(2)}, ${lon.toFixed(2)}`;
      // Show all three values in one chart
      updateAQChart(pm, pm10, aqi, 'Now');
    }).catch(()=>{
      if(kpiLoc) kpiLoc.textContent = nameLabel + ' (AQ fetch failed)';
    });
  }

  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(
      (pos)=>{
        fetchAQ(pos.coords.latitude, pos.coords.longitude, 'Your location');
      },
      ()=>{ fetchAQ(FALLBACK.lat, FALLBACK.lon, FALLBACK.name); }
    );
  } else {
    fetchAQ(FALLBACK.lat, FALLBACK.lon, FALLBACK.name);
  }

  // Simple pledge tracker (localStorage)
  document.getElementById('pledge-btn')?.addEventListener('click', ()=>{
    const option = prompt('What climate action will you take this month? (e.g., cycle to school 2x/week, reduce AC use by 1 hour/day, go meatless on Mondays)');
    if(!option) return;
    const key = 'earthmagPledges';
    const arr = JSON.parse(localStorage.getItem(key) || '[]');
    arr.push({ action: option, date: new Date().toISOString() });
    localStorage.setItem(key, JSON.stringify(arr));
    alert('Nice! Your pledge was saved locally. You can export it anytime.');
  });

  document.getElementById('export-pledge')?.addEventListener('click', ()=>{
    const key = 'earthmagPledges';
    const arr = JSON.parse(localStorage.getItem(key) || '[]');
    if(arr.length === 0){ alert('No pledges yet. Make one!'); return; }
    const csvHeader = 'date,action\n';
    const csvBody = arr.map(r=> `${r.date},"${r.action.replace(/"/g,'\"')}"`).join('\n');
    const blob = new Blob([csvHeader + csvBody], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a'); a.href = url; a.download = 'earthmag_pledges.csv'; a.click(); URL.revokeObjectURL(url);
  });

  // Kick off
  initDatasets();
})();
</script>
</html>